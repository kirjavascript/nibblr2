{
    "locked": false,
    "starred": false,
    "name": "blackjack.bet",
    "command": "const { printTable, finishGame, getProfile } = IRC.require('blackjack.game')\nconst { from: user } = IRC.message\nconst profile = getProfile( user)\nconst betAmount = input\n\nif( !profile.isInGame) {\n\n    if( isNaN(betAmount)) {\n        print( `Invalid bet amount specified, {o}${user}{/}. Please try a number instead.`)\n    } else if( (betAmount|0)<0) {\n        print(`{o}${user}{/}: no.`)\n    } else {\n        const amount = betAmount|0\n\n        if( amount <= 1000 && profile.balance===0) {\n            print( `Oh no! It appears that you're completely our of money, {o}${user}{/}. But not to worry -- since you're a good sport, the bank will spot you {g}造1000{/} in exchange for unspecified future services. Enjoy!`)\n            profile.balance = 1000\n            profile.favours++\n        }   \n        \n        if( amount > profile.balance) {\n            print(`You can't bet more than you have, {o}${user}{/}. Your current balance is {g}造${profile.balance}{/}`)\n            return\n        }\n        \n        if( amount === 0) {\n            print( `{o}${user}{/} playing for funsies.`)\n        } else if( amount <10 ) {\n            print( `{/}Wow, {o}${user}{/}, a {g}造${amount}{/} bet. How brave. Does your mother know you're out gambling?`)\n        } else if( amount >1000) {\n            print( `{o}${user}{/} going in big with a {g}造${amount}{/} bet. Good luck!`)\n        }\n        \n\n        profile.balance -= amount\n        profile.newGame( amount)\n        printTable( profile)\n\n        if( !profile.isInGame) {\n            finishGame( profile)\n        }\n        \n        profile.save()\n    }\n} else {\n    print( `{o}${user}{/}: You still have an active game. Finish that one first!`)\n    printTable( profile)\n}\n"
}