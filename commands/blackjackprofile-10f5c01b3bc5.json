{
    "locked": false,
    "starred": false,
    "name": "blackjack.profile",
    "command": "const Blackjack = require('engine-blackjack')\nconst rules = Blackjack.presets.getRules({})\n\nrules.insurance = false\nrules.surrender = false\n\nclass Profile {\n    constructor( name) {\n        this.name = name\n        \n        let savedState = store.get( name)\n        if( !savedState) {\n            this.game = null\n            this.data = {\n                state: null,\n                name: name,\n                balance: 1000,\n                favours: 0,\n                preferences: {\n                    compact: false\n                },\n            }           \n        } else {\n            this.game = new Blackjack.Game( null, rules)\n            this.data = JSON.parse( savedState)\n            this.game.setState( this.data.state)\n        }\n    }\n    \n    get favours() {\n        if( !this.data.hasOwnProperty( 'favours')) {\n            this.data.favours = 0\n        }\n        \n        return this.data.favours\n    }\n    \n    set favours( value) {\n        this.data.favours = value\n    }\n    \n    get activeHand() {\n        return this.state.handInfo[ this.position]\n    }\n    \n    get position() {\n        let position = null\n\n        if( this.state.stage === 'player-turn-right') {\n            position = 'right'\n        } else if( this.state.stage === 'player-turn-left') {\n            position = 'left'\n        }\n        \n        return position\n    }\n\n    get state() {\n        return this.game.getState()\n    }\n    \n    set state( gameState) {\n        this.game.setState( gameState)\n    }\n    \n    newGame( bet) {\n        this.game = new Blackjack.Game( null, rules)\n        this.game.dispatch( Blackjack.actions.deal({ bet}))\n    }\n    \n    save() {\n        this.data.state = this.state\n        store.set( this.name, JSON.stringify( this.data))\n    }\n\n    get isInGame() {\n        return !( this.game===null || this.state.stage==='done')\n    }\n    \n    get balance() {\n        return this.data.balance\n    }\n    \n    set balance( value) {\n        this.data.balance = value|0\n    }\n}\n\nmodule.exports = { Profile }"
}