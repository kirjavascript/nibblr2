{
    "name": "bet7",
    "command": "const player1 = store.get('bet7')\r\n\r\nif (player1 != null && player1 == IRC.message.from){\r\n  print(\"Nice try nerd.  No self bets.\");\r\n  store.set('bet7', null)\r\n} else if (player1 != null) {\r\n  const player2 = IRC.message.from\r\n\r\n  const player1Score = roll7(player1)\r\n  const player2Score = roll7(player2)\r\n  \r\n  var player1Total = store.get(player1)\r\n  if(isNaN(player1Total)){\r\n      player1Total = 0\r\n  }\r\n  var player2Total = store.get(player2)\r\n  if(isNaN(player2Total)){\r\n      player2Total = 0\r\n  }\r\n\r\n  if(player1Score < player2Score){\r\n    var winner = player1\r\n    var loser = player2\r\n    store.set(winner, (parseInt(player1Total) + 7))\r\n    store.set(loser, (parseInt(player2Total) - 7))\r\n  }else if(player1Score > player2Score){\r\n    var winner = player2\r\n    var loser = player1\r\n    store.set(winner, (parseInt(player2Total) + 7))\r\n    store.set(loser, (parseInt(player1Total) - 7))\r\n  }\r\n  \r\n\r\n  if(winner){\r\n    print(\"{bo}Winner is \"+winner+\"!!{/}\");\r\n    print(\"{bo}\"+loser+\"{/} owes {bo}\"+winner+\"{/} £7 via paypal or ban\")\r\n  }else {\r\n    print(\"{bo}House wins!!{/} \"+\"{bo}\"+player1+\"{/} and {bo}\"+player2+\"{/} owe \" + IRC.breakHighlight('kirjava') + \" £7 via paypal or ban\");\r\n    store.set('Kirjava', (store.get('Kirjava')|0) + 14)\r\n    store.set(player1, (parseInt(player1Total) - 5))\r\n    store.set(player2, (parseInt(player2Total) - 5))\r\n  }\r\n\r\n  store.set('bet7', null)\r\n} else {\r\n  print(\"Type {bo}~bet7{/} to bet with \"+IRC.message.from);\r\n  store.set('bet7', IRC.message.from)\r\n}\r\n\r\nfunction roll7 (user) {\r\n  const roll = () => (0 | Math.random() * 6) + 1\r\n  const dice = Array.from({length: 7}, roll)\r\n  const total = dice.reduce((a, c) => a + c, 0)\r\n  const { from } = IRC.message\r\n\r\n  const diceRender = '{bl,gr} ' + dice.map(d => d == 1 ? '{bo}{p,gr}1{/}{bl,gr}' : d).join`-` + ' {/}'\r\n  print(`${diceRender} {dc}${user}{/} got {o}${total}{/}`);\r\n\r\n  return total;\r\n}",
    "locked": false,
    "starred": false
}