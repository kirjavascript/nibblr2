{
    "name": "golf.test",
    "command": "IRC.sudo();\n\nfunction nuke(task, user) {\n    const [scores, setScores] = IRC.require('module.loadObject')(`scores-${task}`)\n    if (scores[user]) {\n        print(`deleting ${task} for ${user}`)\n        delete scores[user];\n    }\n    setScores(scores);\n}\n\nfunction test(shouldDelete, showMessage) {\n    const ignored = ['wordpath', 'shortestPath', 'polyfill'];\n    tasks = IRC.require('golf.tasks');\n    Object.keys(tasks).filter(d => !ignored.includes(d)).forEach(taskKey => {\n        const [scores, setScores] = IRC.require('module.loadObject')(`scores-${taskKey}`);\n        Object.keys(scores).forEach(key => {\n            const score = scores[key];\n            try {\n                tasks[taskKey].test(score.solution);\n            } catch (e) {\n                if (!showMessage) {\n                    e.message = '[REDACTED]'\n                }\n                print.error(`${key} has an invalid solution for ${taskKey}: ${e.message}`);\n                delete scores[key];\n            }\n        });\n        if (shouldDelete) {\n            setScores(scores);\n        }\n    })\n    print('done');\n}\n\neval(input ? input : 'test()');",
    "locked": false,
    "starred": false
}