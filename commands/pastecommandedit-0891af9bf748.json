{
    "name": "paste_command.edit",
    "command": "//edit command with paste\r\n \r\n(async () => {\r\n    try {\r\n        //const [paste] = input;\r\n        //const url = paste.message.match(/\\b(https?):\\/\\/(.*?)pastebin.com\\/(\\S*)/)[0];\r\n        const url = input;\r\n\t\tconst rawUrl = url.includes('raw') ? url : url.replace('.com/', '.com/raw/');\r\n        const text = await getText(rawUrl);\r\n        const name = (IRC.command.params[0]||'').replace(/\\s+/g, '');\r\n\t\tconst obj = IRC.commandFns.get(name);\r\n\t\tconst isText = d => /^\\/\\*__TEXTCMD__\\*\\/print\\(`(.*?)`\\);?$/.test(d);\r\n\r\n\t\tif (!name || !input) {\r\n    \t\tprint(`{r}Syntax:{/} {p}${IRC.trigger}command.edit(name){/} script`);\r\n\t\t}\r\n\t\telse if (obj && obj.locked) {\r\n    \t\tprint(`{r}Error:{/} ${name} is locked`);\r\n\t\t}\r\n\t\telse if (!obj) {\r\n    \t\tthrow new Error(`no command named ${name}`);\r\n\t\t}\r\n\t\telse {\r\n    \t\tif (isText(obj.command)) {\r\n        \t\ttext = '/*__TEXTCMD__*/print(`' + text.replace(/`/g, '\\\\`') + '`);';\r\n    \t\t}\r\n    \t\tconst status = IRC.commandFns.setSafe(name, text);\r\n    \t\tif (status) {\r\n        \t\tprint(`{p}${IRC.trigger}${name}{/} updated`);\r\n    \t\t}\r\n    \t\telse {\r\n        \t\tprint(`error editing {p}${IRC.trigger}${name}{/} - parent command may be locked`);\r\n    \t\t}\r\n\t\t}\r\n    } catch (e) {\r\n        print.error(e);\r\n    }\r\n})();",
    "locked": false,
    "starred": false
}